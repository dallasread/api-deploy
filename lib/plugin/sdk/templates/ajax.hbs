var API = {
    debug: false,
    init: function() {},

{{#each methods}}
    {{#if data.x-api-deploy}}
        {{#if data.x-api-deploy.sdk.method}}
    {{data.x-api-deploy.sdk.method}}: function {{data.x-api-deploy.sdk.method}}(data, done) {
        if (!done && this.debug) {
            console.warn('No callback supplied.');
        }

        $.ajax({
            method: '{{_method}}',
            url: '{{../sdk.url}}{{_path}}',
            data: '{{_method}}' === 'GET' ? data.query : JSON.stringify(data.payload),
            contentType: 'application/json; charset=utf-8',
            beforeSend: function (xhr) {
                for (var key in data.headers) {
                    xhr.setRequestHeader(key, data.headers[key]);
                }
            },
            complete: function(response) {
                if (response.responseJSON) {
                    if (response.responseJSON.errorMessage) {
                        typeof done === 'function' && done(response.responseJSON, null);
                    } else {
                        typeof done === 'function' && done(null, response.responseJSON);
                    }
                } else {
                    typeof done === 'function' && done(new Error('Could not complete network request.'));
                }
            }
        });
    },
        {{/if}}
    {{/if}}
{{/each}}
};

if (window) window.{{sdk.name}} = API;
module.exports = API;
